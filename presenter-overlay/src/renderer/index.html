<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://*.googleapis.com https://*.gstatic.com https://*.firebaseio.com wss://*.firebaseio.com; script-src 'self' 'unsafe-inline' https://www.gstatic.com; style-src 'self' 'unsafe-inline'; connect-src 'self' https://*.googleapis.com https://*.firebaseio.com wss://*.firebaseio.com;">
  <title>Live Reactions Overlay</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Setup Panel (shown initially) -->
  <div id="setup-panel" class="setup-panel">
    <div class="setup-card">
      <button id="close-btn" class="close-btn" title="Close App">âœ•</button>
      <h1>Live Reactions</h1>
      <p class="subtitle">Enter your room code to start receiving reactions</p>

      <div class="input-group">
        <input
          type="text"
          id="room-input"
          placeholder="Room code (e.g., myTalk2024)"
          autocomplete="off"
          autocapitalize="off"
          spellcheck="false"
        >
        <button id="start-btn">Start</button>
      </div>

      <div id="status" class="status">
        <span class="status-dot"></span>
        <span class="status-text">Ready</span>
      </div>

      <div class="help-text">
        <p>Audience URL: <strong>remote.rohan-dhanawade.de</strong></p>
        <p class="hint">Press Escape to show/hide this panel</p>
      </div>

      <button id="test-btn" class="test-btn">Test Emojis</button>
    </div>
  </div>

  <!-- Emoji Container (floating emojis appear here) -->
  <div id="emoji-container" class="emoji-container"></div>

  <!-- Reaction Counter (optional, shows in corner) -->
  <div id="reaction-counter" class="reaction-counter hidden">
    <span id="counter-value">0</span> reactions
  </div>

  <!-- Status Overlay (shown with Ctrl+Shift+L) -->
  <div id="status-overlay" class="status-overlay hidden">
    <div class="status-card">
      <h2>Live Reactions</h2>
      <div class="status-info">
        <div class="status-row">
          <span class="status-label">Room:</span>
          <span id="status-room-code" class="status-value">---</span>
        </div>
        <div class="status-row">
          <span class="status-label">Status:</span>
          <span class="status-value">
            <span id="status-overlay-dot" class="status-dot connected"></span>
            <span id="status-overlay-text">Connected</span>
          </span>
        </div>
        <div class="status-row">
          <span class="status-label">Reactions:</span>
          <span id="status-reaction-count" class="status-value">0</span>
        </div>
      </div>
      <div class="status-actions">
        <button id="leave-room-btn" class="btn-leave">Leave Room</button>
        <button id="close-status-btn" class="btn-close-status">Close</button>
      </div>
      <p class="status-hint">Press Ctrl+Shift+L or Escape to close</p>
    </div>
  </div>

  <script src="emoji-animator.js"></script>
  <script src="firebase-listener.js"></script>
  <script src="renderer.js"></script>
</body>
</html>
